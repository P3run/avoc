<!DOCTYPE html>
<html lang="en" data-theme="dark">
    <head>
        <title>Avoc</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="css/app.css" rel="stylesheet" />
        <script src="configuration.js"></script>
        <script data-main="src/app.js" src="src/libs/require.js"></script>
    </head>
    <body x-data>
        <nav>
            <ul>
                <li>
                    <label>üîí <strong>Lock</strong></label>
                </li>
                <li>
                    <label>
                        Screen 2
                        <input type="checkbox" role="switch" x-on:click="app.maps.screen2.lock = !app.maps.screen2.lock" />
                    </label>
                </li>
                <li>
                    <label>
                        Screen 3
                        <input type="checkbox" role="switch" x-on:click="app.maps.screen3.lock = !app.maps.screen3.lock" />
                    </label>
                </li>
                <li>
                    <label>
                        Screen 4
                        <input type="checkbox" role="switch" x-on:click="app.maps.screen4.lock = !app.maps.screen4.lock" />
                    </label>
                </li>
                <li>
                    <label>
                        Screen 5
                        <input type="checkbox" role="switch" x-on:click="app.maps.screen5.lock = !app.maps.screen5.lock" />
                    </label>
                </li>
                <li>
                    <label>
                        Screen 6
                        <input type="checkbox" role="switch" x-on:click="app.maps.screen6.lock = !app.maps.screen6.lock" />
                    </label>
                </li>
            </ul>
            <ul>
                <li>
                    <button class="contrast" x-on:click="$refs.shortcuts.setAttribute('open', '')">üîó</button>
                </li>
                <li>
                    <button class="contrast" x-on:click="$refs.weather.setAttribute('open', '')">‚òÄÔ∏è</button>
                </li>
            </ul>
        </nav>
        <main>
            <div class="grid-area" screens="6">
                <img data-compass data-rotation="0" data-screen="1" src="static/compass.png" />
                <img data-compass data-rotation="0" data-screen="2" src="static/compass.png" />
                <img data-compass data-rotation="270" data-screen="3" src="static/compass.png" />
                <img data-compass data-rotation="180" data-screen="4" src="static/compass.png" />
                <img data-compass data-rotation="90" data-screen="5" src="static/compass.png" />
                <div id="screen1"></div>
                <div id="screen2"></div>
                <div id="screen3"></div>
                <div id="screen4"></div>
                <div id="screen5"></div>
                <div id="screen6"></div>
            </div>
        </main>
        <dialog x-ref="shortcuts">
            <article>
                <header>
                    <button aria-label="Close" rel="prev" x-on:click="$refs.shortcuts.removeAttribute('open')"></button>
                    <p>
                        <strong>Shortcuts</strong>
                    </p>
                </header>
                <template x-for="category in app.shortcuts.getCategories()">
                    <div>
                        <h4 x-text="category"></h4>
                        <div role="flex">
                            <template x-for="link in app.shortcuts.getLinks(category)">
                                <button class="contrast" x-text="link.name" x-on:click="app.shortcuts.open(link.url, link.precision)"></a>
                            </template>
                        </div>
                    </div>
                </template>
            </article>
        </dialog>
        <dialog x-ref="weather">
            <article>
                <header>
                    <button aria-label="Close" rel="prev" x-on:click="$refs.weather.removeAttribute('open')"></button>
                    <p>
                        <strong>Weather</strong>
                    </p>
                </header>
                <fieldset role="group">
                    <button disabled :data-tooltip="$store.translations.tooltipElevation" data-placement="bottom">
                        ‚õ∞Ô∏è
                    </button>
                    <input type="text" x-model="$store.weather.elevation" disabled>
                </fieldset>
                <fieldset role="group">
                    <button disabled :data-tooltip="$store.translations.temperature" data-placement="bottom">
                        üå°Ô∏è
                    </button>
                    <input type="text" x-model="$store.weather.temperature" disabled>
                </fieldset>
                <fieldset role="group">
                    <button disabled :data-tooltip="$store.translations.precipitation" data-placement="bottom">
                        üíß
                    </button>
                    <input type="text" x-model="$store.weather.precipitation" disabled>
                </fieldset>
                <fieldset role="group">
                    <button disabled :data-tooltip="$store.translations.cloudCover" data-placement="bottom">
                        ‚òÅÔ∏è
                    </button>
                    <input type="text" x-model="$store.weather.cloudCover" disabled>
                </fieldset>
                <fieldset role="group">
                    <button disabled :data-tooltip="$store.translations.windDirection" data-placement="bottom">
                        üß≠
                    </button>
                    <input type="text" x-model="$store.weather.windDirection" disabled>
                </fieldset>
                <fieldset role="group">
                    <button disabled :data-tooltip="$store.translations.windSpeed" data-placement="bottom">
                        üí®
                    </button>
                    <input type="text" x-model="$store.weather.windSpeed" disabled>
                </fieldset>
                <fieldset role="group">
                    <button disabled :data-tooltip="$store.translations.WMOcode" data-placement="bottom">
                        üè∑Ô∏è
                    </button>
                    <input type="text" x-model="$store.weather.WMOcode" disabled>
                </fieldset>
                <fieldset role="group">
                    <button disabled :data-tooltip="$store.translations.lastUpdate" data-placement="bottom">
                        üïí
                    </button>
                    <input type="text" x-model="$store.weather.lastUpdate" disabled>
                </fieldset>
                <button class="contrast" x-on:click="$store.weather.refresh()">
                    ‚ü≤
                </button>
            </article>
        </dialog>
        <script>
            document.addEventListener('alpine:init', () => {
                Alpine.store('translations', app.services.getTranslation());
                Alpine.store('weather', {
                    elevation: '--',
                    temperature: '--',
                    precipitation: '--',
                    cloudCover: '--',
                    windSpeed: '--',
                    windDirection: '--',
                    WMOcode: '',
                    lastUpdate: '',
                    async refresh() {
                        const weather = await app.services.getCurrentWeather();
                        this.temperature = weather.temperature2m;
                        this.precipitation = weather.precipitation;
                        this.cloudCover = weather.cloudCover;
                        this.windSpeed = weather.windSpeed10m;
                        this.windDirection = weather.windDirection10m;
                        this.WMOcode = weather.WMOcode;
                        this.lastUpdate = weather.lastUpdate;
                        this.elevation = weather.elevation;
                    }
                });
            });
        </script>
    </body>
</html>
